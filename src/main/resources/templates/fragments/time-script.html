<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Time Script Fragment</title>
</head>
<body>
<th:block th:fragment="timeScript">
    <script>
        // 상대 시간 업데이트 함수
        function updateRelativeTime() {
            document.querySelectorAll('[data-created-at]').forEach(function (element) {
                const createdAt = new Date(element.getAttribute('data-created-at'));
                const now = new Date();
                const diffMs = now - createdAt;
                const diffMinutes = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                const diffDays = Math.floor(diffMs / 86400000);
                const diffYears = Math.floor(diffDays / 365);

                let relativeTime;

                if (diffMinutes < 1) {
                    relativeTime = '방금 전';
                } else if (diffMinutes < 60) {
                    relativeTime = diffMinutes + '분 전';
                } else if (diffHours < 24) {
                    relativeTime = diffHours + '시간 전';
                } else if (diffDays < 365) {
                    relativeTime = diffDays + '일 전';
                } else {
                    relativeTime = diffYears + '년 전';
                }

                element.textContent = relativeTime;
            });
        }

        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', updateRelativeTime);

        updateRelativeTime();

        // 1분마다 업데이트
        setInterval(updateRelativeTime, 60000);
    </script>
</th:block>
</body>
</html>
