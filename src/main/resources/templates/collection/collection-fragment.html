<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Collections Fragment</title>
</head>
<body>
<div th:fragment="collections-content">
    <!-- Collections 헤더 -->
    <div class="card-header d-flex justify-content-between align-items-center border-0 pb-0">
        <div class="d-flex align-items-center">
            <h5 class="card-title mb-0 me-3">My Collections</h5>
            <span class="badge bg-primary bg-opacity-10 text-primary"
                  th:text="${totalCollections ?: 0}">0</span>
        </div>

        <div class="d-flex gap-2">
            <!-- 필터 드롭다운 -->
            <div class="dropdown">
                <button class="btn btn-light btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                    <i class="bi bi-funnel"></i> 필터
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <button class="dropdown-item"
                                hx-get="/collections/fragment"
                                hx-target="#content-area"
                                hx-vals='{"filter": "all"}'>
                            <i class="bi bi-collection"></i> 전체
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item"
                                hx-get="/collections/fragment"
                                hx-target="#content-area"
                                hx-vals='{"filter": "public"}'>
                            <i class="bi bi-globe"></i> 공개
                        </button>
                    </li>
                </ul>
            </div>

            <button class="btn btn-primary btn-sm"
                    hx-get="/collections/create-modal"
                    hx-target="#modal-container">
                <i class="bi bi-plus-lg"></i> 컬렉션 만들기
            </button>
        </div>
    </div>

    <div class="card-body">
        <!-- 컬렉션이 없을 때 -->
        <div class="text-center py-5" th:if="${collections == null or collections.isEmpty()}">
            <i class="bi bi-collection display-1 text-muted"></i>
            <h5 class="mt-3">아직 컬렉션이 없습니다</h5>
            <p class="text-muted">즐겨찾는 맛집들을 모아서 첫 번째 컬렉션을 만들어보세요!</p>
            <button class="btn btn-primary"
                    hx-get="/collections/create-modal"
                    hx-target="#modal-container">
                <i class="bi bi-plus-circle me-2"></i>컬렉션 만들기
            </button>
        </div>

        <!-- 컬렉션 그리드 -->
        <div class="row g-3" th:if="${collections != null and !collections.isEmpty()}">
            <!-- Add collection card -->
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="card border-2 border-dashed h-100 text-center d-flex align-items-center justify-content-center"
                     style="min-height: 250px;">
                    <button class="btn border-0 bg-transparent"
                            hx-get="/collections/create-modal"
                            hx-target="#modal-container">
                        <i class="bi bi-plus-circle fs-1 text-primary"></i>
                        <h6 class="mt-2 text-muted">컬렉션 만들기</h6>
                    </button>
                </div>
            </div>

            <!-- Collection cards -->
            <div th:each="collection : ${collections.content}"
                 th:replace="~{collection/collection-card :: collection-card(${collection})}">
            </div>
        </div>

        <!-- Load more collections -->
        <div class="text-center mt-4" th:if="${collections.hasNext()}">
            <button class="btn btn-outline-primary"
                    hx-get="/collections/fragment"
                    hx-swap="innerHTML"
                    hx-target="#content-area"
                    page\ th:attr="hx-vals='{\"
            ": ${collections.number + 1}}'">
            더 많은 컬렉션 보기
            </button>
        </div>
    </div>
</div>
</body>
</html>
